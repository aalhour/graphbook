%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% This file is part of the book
%%
%% Algorithmic Graph Theory
%% http://code.google.com/p/graph-theory-algorithms-book/
%%
%% Copyright (C) 2009, 2010 Minh Van Nguyen <nguyenminh2@gmail.com>
%%
%% See the file COPYING for copying conditions.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DontPrintSemicolon
\SetAlgoNoLine
%%
%% data section
\SetKwInOut{Input}{Input}
\SetKwInOut{Output}{Output}
\SetKwData{Acyclic}{acyclic}
\SetKwData{Directed}{directed}
\SetKwData{MyFalse}{False}
\SetKwData{MyTrue}{True}
\SetKwData{Simple}{simple}
\SetKwData{Weighted}{weighted}
%%
%% input/output
\Input{Positive integers $n$ and $m$ specifying the order and size,
  respectively, of the output graph. A boolean \Simple that flags
  whether the resulting graph is simple. A boolean \Directed
  indicating whether the output graph is directed. A boolean \Acyclic
  to flag whether the output graph is acyclic. A boolean \Weighted to
  flag whether the resulting graph is weighted. A minimum weight
  $\alpha$ and a maximum weight $\beta$.}
\Output{A random graph with $n$ vertices, $m$ edges, and having the
  specified parameters. If $m$ exceeds the size of $K_n$, then $K_n$
  is returned.}
\BlankLine
%%
%% algorithm body
\If{$n = 1$}{
  \Return $K_1$\;
}
$G \assign$ null graph\;
$W \assign [0, 0, \dots, 0]$\tcc*[f]{$m$ copies of $0$}\;
$A \assign n \times n$ adjacency matrix with entries $a_{ij}$\;
$a_{ij} \assign \MyFalse$ for $0 \leq i,j < n$\;
\If{$\Simple = \MyTrue$}{
  $M \assign n(n-1)$\;
  \If{$\Directed = \MyFalse$}{
    $M \assign M / 2$\;
  }
  \If{$m > M$}{
    \Return $K_n$\;
  }
}
\If{$\Acyclic = \MyTrue$}{
  $M \assign \frac{n(n-1)}{2}$\;
  \If{$m > M$}{
    \Return $K_n$\;
  }
  $P \assign$ random permutation of $\{0, 1, \dots, n-1\}$\;
}
$i \assign 0$\;
\While{$i < m$}{
  $u \assign$ random element from $\{0, 1, \dots, n-1\}$\;
  $v \assign$ random element from $\{0, 1, \dots, n-1\}$\;
  \If{\rm $\Simple = \MyTrue$ or $\Acyclic = \MyTrue$}{
    \If{$u = v$}{
      continue with next iteration of loop\;
    }
  }
  \If{\rm ($\Simple = \MyTrue$ and $\Directed = \MyFalse$) or $\Acyclic = \MyTrue$}{
    \If{$u > v$}{
      swap values of $u$ and $v$\;
    }
  }
  \If{$\Acyclic = \MyTrue$}{
    $u \assign P[u]$\;
    $v \assign P[v]$\;
  }
  \If{\rm $\Simple = \MyFalse$ or ($\Simple = \MyTrue$ and $a_{uv} = \MyFalse$)}{
    add edge $(u,v)$ to $G$\;
    $a_{uv} \assign \MyTrue$\;
    \If{$\Weighted = \MyTrue$}{
      $W[i] \assign$ random element from closed interval $[\alpha, \beta]$\;
    }
    $i \assign i + 1$\;
  }
}
\Return $(G, W)$\;
